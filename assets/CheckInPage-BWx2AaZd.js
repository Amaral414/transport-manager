import{b as M,Q as x}from"./QSeparator-Clnp71Zw.js";import{Q as _,a as v,b as A,c as y}from"./QPage-DUEFcpF1.js";import{h as N,v as R,d as T}from"./QBtn-DO64f7RN.js";import{f as $,Q as h}from"./use-model-toggle-eM4sKldl.js";import{k as w,r as O,X as G,Y as H,o as L,g as X,h as Y,G as j,p as Z,I as z,Z as J,L as K,M as k,K as W,U as ee,f as e,N as u,F as ae,S as V}from"./index-GH3YncX-.js";const S=w({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(l,{slots:o,emit:r}){const c=X(),a=O(null);let n=0;const f=[];function I(t){const m=typeof t=="boolean"?t:l.noErrorFocus!==!0,b=++n,E=(d,s)=>{r(`validation${d===!0?"Success":"Error"}`,s)},B=d=>{const s=d.validate();return typeof s.then=="function"?s.then(i=>({valid:i,comp:d}),i=>({valid:!1,comp:d,err:i})):Promise.resolve({valid:s,comp:d})};return(l.greedy===!0?Promise.all(f.map(B)).then(d=>d.filter(s=>s.valid!==!0)):f.reduce((d,s)=>d.then(()=>B(s).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(d=>[d])).then(d=>{if(d===void 0||d.length===0)return b===n&&E(!0),!0;if(b===n){const{comp:s,err:i}=d[0];if(i!==void 0&&console.error(i),E(!1,s),m===!0){const P=d.find(({comp:U})=>typeof U.focus=="function"&&R(U.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function q(){n++,f.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function C(t){t!==void 0&&j(t);const m=n+1;I().then(b=>{m===n&&b===!0&&(l.onSubmit!==void 0?r("submit",t):t?.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function Q(t){t!==void 0&&j(t),r("reset"),Z(()=>{q(),l.autofocus===!0&&l.noResetFocus!==!0&&p()})}function p(){M(()=>{if(a.value===null)return;(a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),m=>m.tabIndex!==-1))?.focus({preventScroll:!0})})}z(J,{bindComponent(t){f.push(t)},unbindComponent(t){const m=f.indexOf(t);m!==-1&&f.splice(m,1)}});let F=!1;return G(()=>{F=!0}),H(()=>{F===!0&&l.autofocus===!0&&p()}),L(()=>{l.autofocus===!0&&p()}),Object.assign(c.proxy,{validate:I,resetValidation:q,submit:C,reset:Q,focus:p,getValidationComponents:()=>f}),()=>Y("form",{class:"q-form",ref:a,onSubmit:C,onReset:Q},N(o.default))}}),g={__name:"TimeInputs",props:{label:String,modelValue:String,type:{type:String,default:"date"},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(l){return(o,r)=>(k(),K(x,{outlined:"",dense:"",label:l.label,"model-value":l.modelValue,"onUpdate:modelValue":r[0]||(r[0]=c=>o.$emit("update:modelValue",c)),type:l.type,rules:l.rules,mask:l.type==="time"?"##:##":void 0,"fill-mask":""},null,8,["label","model-value","type","rules","mask"]))}},D={__name:"InputTexto",props:{label:String,modelValue:[String,Number],type:{type:String,default:"text"},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(l){return(o,r)=>(k(),K(x,{outlined:"",dense:"",label:l.label,"model-value":l.modelValue,"onUpdate:modelValue":r[0]||(r[0]=c=>o.$emit("update:modelValue",c)),type:l.type,rules:l.rules},null,8,["label","model-value","type","rules"]))}},re={__name:"CheckInPage",setup(l){const o=W({data:"",entrada:"",saida:"",kmSaida:"",kmChegada:"",intervalo:{entradaIntervalo:"",saidaIntervalo:""},turnoTarde:{entrada:"",saida:""}});function r(){console.log("Form enviado:",o)}return(c,a)=>(k(),ee(ae,null,[e(_,{class:"q-pa-md bg-grey-1"},{default:u(()=>[a[7]||(a[7]=V("h3",null,"Check-In",-1)),e(v,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:u(()=>[e(A,{"expand-separator":"",icon:"wb_sunny",label:"Inicio do dia",caption:"Dados de começo da viajem"},{default:u(()=>[e(v,null,{default:u(()=>[e(S,{onSubmit:r,class:"q-gutter-md"},{default:u(()=>[e(y,{class:"q-gutter-md"},{default:u(()=>[e(x,{type:"date",outlined:"",dense:"",label:"Data da viagem"}),e(D,{label:"KM Saída",modelValue:o.kmSaida,"onUpdate:modelValue":a[0]||(a[0]=n=>o.kmSaida=n),type:"number"},null,8,["modelValue"]),e(g,{modelValue:o.entrada,"onUpdate:modelValue":a[1]||(a[1]=n=>o.entrada=n),label:"Hora Entrada",type:"time"},null,8,["modelValue"]),e(g,{modelValue:o.saida,"onUpdate:modelValue":a[2]||(a[2]=n=>o.saida=n),label:"Saída para o intervalo",type:"time"},null,8,["modelValue"])]),_:1}),e(y,null,{default:u(()=>[e($,null,{default:u(()=>[e(h,{class:""},{default:u(()=>[e(T,{color:"primary",label:"Salvar",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:u(()=>[e(A,{"expand-separator":"",icon:"nights_stay",label:"Turno da Tarde",caption:"Entrada e saída do turno da tarde"},{default:u(()=>[e(v,null,{default:u(()=>[e(S,{onSubmit:r,class:"q-gutter-md"},{default:u(()=>[e(y,{class:"q-gutter-md"},{default:u(()=>[e(g,{modelValue:o.entrada,"onUpdate:modelValue":a[3]||(a[3]=n=>o.entrada=n),label:"Volta do intervalo",type:"time"},null,8,["modelValue"]),e(g,{modelValue:o.saida,"onUpdate:modelValue":a[4]||(a[4]=n=>o.saida=n),label:"Término de viajem",type:"time"},null,8,["modelValue"]),e(D,{label:"KM de chegada",modelValue:o.kmSaida,"onUpdate:modelValue":a[5]||(a[5]=n=>o.kmSaida=n),type:"number"},null,8,["modelValue"])]),_:1}),e(y,null,{default:u(()=>[e($,null,{default:u(()=>[e(h,{class:""},{default:u(()=>[e(T,{color:"primary",label:"Salvar",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,null,{default:u(()=>a[6]||(a[6]=[V("div",null,[V("div",{class:"col"})],-1)])),_:1,__:[6]})]),_:1,__:[7]}),e(_,{class:"q-pa-md bg-grey-1"})],64))}};export{re as default};
