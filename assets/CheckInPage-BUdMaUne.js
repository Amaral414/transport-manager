import{h as O,v as j,Q as I,d as S}from"./QBtn-BXadAw-l.js";import{Q as E,a as h}from"./QPage-B9NOJ_ZB.js";import{k as K,r as _,_ as G,$ as z,o as J,g as W,h as X,G as R,p as Y,I as Z,a0 as ee,L as q,M as y,K as H,w,U as N,S as c,f as a,O as D,Q as te,N as d,F as ae,R as oe,P as k}from"./index-SHUMVGom.js";import{b as le,Q as L}from"./QInput-DM_GxUBR.js";import"./use-dark-DonwprpP.js";const b=K({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:l,emit:u}){const p=W(),e=_(null);let s=0;const t=[];function m(n){const v=typeof n=="boolean"?n:o.noErrorFocus!==!0,g=++s,B=(r,i)=>{u(`validation${r===!0?"Success":"Error"}`,i)},Q=r=>{const i=r.validate();return typeof i.then=="function"?i.then(f=>({valid:f,comp:r}),f=>({valid:!1,comp:r,err:f})):Promise.resolve({valid:i,comp:r})};return(o.greedy===!0?Promise.all(t.map(Q)).then(r=>r.filter(i=>i.valid!==!0)):t.reduce((r,i)=>r.then(()=>Q(i).then(f=>{if(f.valid===!1)return Promise.reject(f)})),Promise.resolve()).catch(r=>[r])).then(r=>{if(r===void 0||r.length===0)return g===s&&B(!0),!0;if(g===s){const{comp:i,err:f}=r[0];if(f!==void 0&&console.error(f),B(!1,i),v===!0){const P=r.find(({comp:$})=>typeof $.focus=="function"&&j($.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function T(){s++,t.forEach(n=>{typeof n.resetValidation=="function"&&n.resetValidation()})}function U(n){n!==void 0&&R(n);const v=s+1;m().then(g=>{v===s&&g===!0&&(o.onSubmit!==void 0?u("submit",n):n?.target!==void 0&&typeof n.target.submit=="function"&&n.target.submit())})}function F(n){n!==void 0&&R(n),u("reset"),Y(()=>{T(),o.autofocus===!0&&o.noResetFocus!==!0&&V()})}function V(){le(()=>{if(e.value===null)return;(e.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(e.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1))?.focus({preventScroll:!0})})}Z(ee,{bindComponent(n){t.push(n)},unbindComponent(n){const v=t.indexOf(n);v!==-1&&t.splice(v,1)}});let M=!1;return G(()=>{M=!0}),z(()=>{M===!0&&o.autofocus===!0&&V()}),J(()=>{o.autofocus===!0&&V()}),Object.assign(p.proxy,{validate:m,resetValidation:T,submit:U,reset:F,focus:V,getValidationComponents:()=>t}),()=>X("form",{class:"q-form",ref:e,onSubmit:U,onReset:F},O(l.default))}}),C={__name:"InputTexto",props:{label:String,modelValue:[String,Number],type:{type:String,default:"text"},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(o){return(l,u)=>(y(),q(L,{outlined:"",dense:"",label:o.label,"model-value":o.modelValue,"onUpdate:modelValue":u[0]||(u[0]=p=>l.$emit("update:modelValue",p)),type:o.type,rules:o.rules},null,8,["label","model-value","type","rules"]))}},x={__name:"TimeInputs",props:{label:String,modelValue:String,type:{type:String,default:"date"},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(o){return(l,u)=>(y(),q(L,{outlined:"",dense:"",label:o.label,"model-value":o.modelValue,"onUpdate:modelValue":u[0]||(u[0]=p=>l.$emit("update:modelValue",p)),type:o.type,rules:o.rules,mask:o.type==="time"?"##:##":void 0,"fill-mask":""},null,8,["label","model-value","type","rules","mask"]))}},ne={class:"q-gutter-md"},re={class:"text-subtitle2"},A={__name:"BlocoHorario",props:{titulo:String,horario:Object,mostrarIntervalo:{type:Boolean,default:!1}},emits:["update:horario"],setup(o,{emit:l}){const u=o,p=l,e=H({...u.horario});return w(e,s=>{p("update:horario",{...s})},{deep:!0}),w(()=>u.horario,s=>{Object.assign(e,s)},{deep:!0}),(s,t)=>(y(),N("div",ne,[c("div",re,te(o.titulo),1),a(x,{modelValue:e.entrada,"onUpdate:modelValue":t[0]||(t[0]=m=>e.entrada=m),label:"Hora Entrada",type:"time"},null,8,["modelValue"]),a(x,{modelValue:e.saida,"onUpdate:modelValue":t[1]||(t[1]=m=>e.saida=m),label:"Hora Saída",type:"time"},null,8,["modelValue"]),o.mostrarIntervalo?(y(),q(x,{key:0,modelValue:e.intervaloManha,"onUpdate:modelValue":t[2]||(t[2]=m=>e.intervaloManha=m),label:"Intervalo Manhã",type:"time"},null,8,["modelValue"])):D("",!0),o.mostrarIntervalo?(y(),q(x,{key:1,modelValue:e.intervaloTarde,"onUpdate:modelValue":t[3]||(t[3]=m=>e.intervaloTarde=m),label:"Intervalo Tarde",type:"time"},null,8,["modelValue"])):D("",!0)]))}},ue={class:"text-subtitle2 text-primary"},se={class:"text-subtitle2 text-indigo-7"},de={class:"text-subtitle2 text-orange-8"},ie={class:"col"},me={class:"col"},Ve={__name:"CheckInPage",setup(o){const l=H({motorista:"",data:"",placa:"",kmSaida:"",kmChegada:"",destino:"",turnoManha:{entrada:"",saida:""},intervalo:{intervaloManha:"",intervaloTarde:""},turnoTarde:{entrada:"",saida:""}});function u(){console.log("Form enviado:",l)}return(p,e)=>{const s=oe("InputDataHora");return y(),N(ae,null,[a(E,{class:"q-pa-md bg-grey-1"},{default:d(()=>[e[10]||(e[10]=c("h3",null,"Check-In",-1)),a(b,{onSubmit:u,class:"q-gutter-md"},{default:d(()=>[a(b,null,{default:d(()=>[a(h,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:d(()=>[c("div",ue,[a(I,{name:"wb_sunny",class:"q-mr-sm"}),e[7]||(e[7]=k(" Turno da Manhã "))]),a(A,{horario:l.turnoManha,"onUpdate:horario":e[0]||(e[0]=t=>l.turnoManha=t)},null,8,["horario"]),a(S,{label:"SALVAR",type:"submit",color:"primary",icon:"save",class:"full-width",unelevated:""})]),_:1})]),_:1}),a(b,null,{default:d(()=>[a(h,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:d(()=>[c("div",se,[a(I,{name:"coffee",class:"q-mr-sm"}),e[8]||(e[8]=k(" Intervalos "))]),a(A,{horario:l.intervalo,"onUpdate:horario":e[1]||(e[1]=t=>l.intervalo=t),mostrarIntervalo:!0},null,8,["horario"]),a(S,{label:"SALVAR",type:"submit",color:"primary",icon:"save",class:"full-width",unelevated:""})]),_:1})]),_:1}),a(b,null,{default:d(()=>[a(h,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:d(()=>[c("div",de,[a(I,{name:"nights_stay",class:"q-mr-sm"}),e[9]||(e[9]=k(" Turno da Tarde "))]),a(A,{horario:l.turnoTarde,"onUpdate:horario":e[2]||(e[2]=t=>l.turnoTarde=t)},null,8,["horario"]),a(S,{label:"SALVAR",type:"submit",color:"primary",icon:"save",class:"full-width",unelevated:""})]),_:1})]),_:1}),a(b,null,{default:d(()=>[c("div",null,[c("div",ie,[a(C,{label:"KM Chegada",modelValue:l.kmChegada,"onUpdate:modelValue":e[3]||(e[3]=t=>l.kmChegada=t),type:"number"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1,__:[10]}),a(E,{class:"q-pa-md bg-grey-1"},{default:d(()=>[a(b,{onSubmit:u,class:"q-gutter-md"},{default:d(()=>[a(h,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:d(()=>[a(s,{label:"Data da Viagem",type:"date",modelValue:l.data,"onUpdate:modelValue":e[4]||(e[4]=t=>l.data=t)},null,8,["modelValue"]),c("div",null,[c("div",me,[a(C,{label:"KM Saída",modelValue:l.kmSaida,"onUpdate:modelValue":e[5]||(e[5]=t=>l.kmSaida=t),type:"number"},null,8,["modelValue"])])]),a(C,{label:"Destino",modelValue:l.destino,"onUpdate:modelValue":e[6]||(e[6]=t=>l.destino=t)},null,8,["modelValue"]),a(S,{label:"SALVAR",type:"submit",color:"primary",icon:"save",class:"full-width",unelevated:""})]),_:1})]),_:1})]),_:1})],64)}}};export{Ve as default};
